# Application name for identification
spring.application.name=sticky-notes

# Use PORT environment variable for Cloud Run with fallback to 8081 for local development
# Note: Deployment to Cloud Run should still use port 8080 (via PORT env variable)
server.port=${PORT:8081}

# Profile-specific properties will be loaded from application-{profile}.properties
# Default to local profile if not specified
spring.profiles.active=${SPRING_PROFILES_ACTIVE:local}

# Database connection settings - Use Supabase DATABASE_URL components
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DATABASE_USERNAME}
spring.datasource.password=${DATABASE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Hibernate/JPA properties
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.type=trace

# Connection pool settings
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1200000


# Health and info endpoints for monitoring
management.endpoint.health.show-details=always
management.endpoints.web.exposure.include=health,info

# Logging configuration
logging.level.root=INFO
logging.level.com.Sticky_notes=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.jdbc=DEBUG
logging.level.org.springframework.transaction=DEBUG
logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=DEBUG

# JWT Configuration 
app.jwtSecret=${JWT_SECRET}

# Access token expires in 15 minutes 
app.jwtExpirationMs=900000

# Refresh token expires in 7 days 
app.jwtRefreshExpirationMs=604800000

# Stripe Configuration
stripe.secret.key=${STRIPE_SECRET_KEY}
stripe.publishable.key=${STRIPE_PUBLISHABLE_KEY}
stripe.webhook.secret=${STRIPE_WEBHOOK_SECRET}


# Gemini AI Configuration
gemini.api.key=${GEMINI_API_KEY}
gemini.model=${GEMINI_MODEL:gemini-2.0-flash}
